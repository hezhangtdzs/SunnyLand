## 验证发现的主要问题

根据对项目代码的全面审查，发现文档与代码存在以下不一致：

### 高优先级问题（严重影响准确性）

1. **SceneManager 智能指针类型错误**
   - 文档：`scene_stack_ : vector<Scene*>`, `SessionData*`
   - 实际：`std::vector<std::unique_ptr<Scene>>`, `std::shared_ptr<game::data::SessionData>`

2. **SessionData 单例模式描述错误**
   - 文档：描述为单例模式 (`getInstance()`)
   - 实际：通过 `std::shared_ptr` 在 SceneManager 中共享，不是单例

3. **PlayerComponent::setState 参数类型错误**
   - 文档：`PlayerState*`
   - 实际：`std::unique_ptr<state::PlayerState>`

### 中优先级问题（完整性问题）

4. **缺少方法/成员**（多个组件类）
   - PhysicsComponent: `suppressSnapFor`, `isSnapSuppressed` 等
   - HealthComponent: `setMaxHealth`, `heal` 等
   - AnimationComponent: `setOneShotRemoval` 等

5. **文件路径大小写不一致**
   - 文档：`Fall_state.h/cpp`
   - 实际：`fall_state.h`（小写）

### 低优先级问题（一致性问题）

6. **类型别名不统一**
   - 文档：`vec2`, `json`
   - 实际：`glm::vec2`, `nlohmann::json`

---

## 修复计划

### 阶段一：修复高优先级问题
1. 更新 `02_core_class_diagram.md` - 修正 SceneManager 智能指针类型
2. 更新 `05_key_mechanisms_part1.md` 等 - 修正 SessionData 描述
3. 更新 `02_core_class_diagram.md` - 修正 PlayerComponent::setState 参数

### 阶段二：补充缺失内容
4. 更新 `02_core_class_diagram.md` - 补充组件类缺少的方法
5. 更新 `04_directory_structure.md` - 修正文件路径大小写

### 阶段三：统一术语
6. 统一类型别名表示
7. 统一命名空间表示

请确认此计划后，我将开始执行文档修复工作。